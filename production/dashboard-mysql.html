<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Dashboard - TV Display</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* TV-Optimized Dashboard Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Manrope', 'Inter', 'Arial', sans-serif;
            background: linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #334155 100%);
            color: #FFFFFF;
            font-size: 24px; /* Base font size doubled for TV viewing */
        }

        /* TV-Optimized Typography */
        .main-title {
            font-size: 6rem; /* Extra large for 50m viewing */
            font-weight: 900;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            background: linear-gradient(135deg, #60A5FA, #A78BFA);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 0.1em;
        }

        .date-time {
            font-size: 2.5rem;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .scoreboard-table {
            font-size: 2.5rem;
            font-weight: 600;
        }

        .scoreboard-table th {
            font-size: 2.8rem;
            font-weight: 700;
            padding: 2rem 1.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .scoreboard-table td {
            padding: 2.5rem 1.5rem;
            border-bottom: 2px solid rgba(148, 163, 184, 0.2);
        }

        .agent-name {
            font-size: 3.2rem;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .agent-stats {
            font-size: 2.2rem;
            font-weight: 500;
        }

        .progress-bar {
            height: 2rem;
            border-radius: 1rem;
            overflow: hidden;
            background: rgba(51, 65, 85, 0.5);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }

        .progress-fill {
            height: 100%;
            border-radius: 1rem;
            transition: width 1s ease-in-out;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .progress-text {
            font-size: 2rem;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .daily-targets-header {
            font-size: 3rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .daily-targets-table {
            font-size: 2.2rem;
            font-weight: 600;
        }

        .status-badge {
            font-size: 1.8rem;
            font-weight: 700;
            padding: 0.8rem 1.5rem;
            border-radius: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Background Effects */
        .scoreboard-container {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        /* News Ticker */
        .news-ticker {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, #3B82F6, #1D4ED8);
            color: white;
            font-size: 2.5rem;
            font-weight: 600;
            padding: 1.5rem 0;
            overflow: hidden;
            box-shadow: 0 -4px 16px rgba(0,0,0,0.3);
            z-index: 1000;
        }

        .ticker-content {
            white-space: nowrap;
            animation: scroll-left 60s linear infinite;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        @keyframes scroll-left {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* Sale Popup */
        .sale-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            padding: 3rem 4rem;
            border-radius: 2rem;
            font-size: 3rem;
            font-weight: 700;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            z-index: 2000;
            animation: salePopupAnimation 5s ease-in-out;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        @keyframes salePopupAnimation {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            10% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            15% { transform: translate(-50%, -50%) scale(1); }
            85% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }

        .hidden {
            display: none;
        }

        /* Cash Offer Banner */
        .cash-offer-banner {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #F59E0B, #D97706);
            color: white;
            padding: 2rem 3rem;
            border-radius: 1.5rem;
            font-size: 2.2rem;
            font-weight: 700;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            z-index: 1500;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* Connection Status */
        .connection-status {
            position: fixed;
            top: 2rem;
            left: 2rem;
            padding: 1rem 2rem;
            border-radius: 1rem;
            font-size: 1.8rem;
            font-weight: 600;
            z-index: 1500;
        }

        .status-connected {
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid #10B981;
            color: #34D399;
        }

        .status-disconnected {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid #EF4444;
            color: #F87171;
        }

        /* Agent Photo */
        .agent-photo {
            width: 8rem;
            height: 8rem;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid rgba(255,255,255,0.2);
            box-shadow: 0 4px 16px rgba(0,0,0,0.3);
        }

        /* Auto-scroll indicators */
        .scroll-indicator {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background: rgba(148, 163, 184, 0.3);
            transition: all 0.5s ease;
        }

        .scroll-indicator.active {
            background: #3B82F6;
            box-shadow: 0 0 16px rgba(59, 130, 246, 0.5);
        }

        /* Team color indicators */
        .team-indicator {
            width: 1.5rem;
            height: 8rem;
            border-radius: 0.75rem;
            margin-right: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status status-disconnected">
        ðŸ”´ Connecting to Database...
    </div>
    
    <!-- Main Dashboard Container -->
    <div id="root"></div>
    
    <!-- Sale Popup -->
    <div id="salePopup" class="sale-popup hidden"></div>
    
    <!-- Cash Offers Banner -->
    <div id="cashOfferBanner" class="cash-offer-banner hidden">
        ðŸ’° Special Offer: Extra Commission Available!
    </div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // MySQL Database API Client
        class MySQLDB {
            constructor() {
                this.apiBase = './api.php';
                this.cache = null;
                this.isConnected = false;
                this.checkConnection();
            }

            async checkConnection() {
                try {
                    await this.fetchDashboardData();
                    this.setConnectionStatus(true);
                } catch (error) {
                    console.error('Database connection failed:', error);
                    this.setConnectionStatus(false);
                }
            }

            setConnectionStatus(connected) {
                this.isConnected = connected;
                const statusEl = document.getElementById('connectionStatus');
                if (connected) {
                    statusEl.className = 'connection-status status-connected';
                    statusEl.innerHTML = 'ðŸŸ¢ Database Connected';
                } else {
                    statusEl.className = 'connection-status status-disconnected';
                    statusEl.innerHTML = 'ðŸ”´ Database Connection Failed';
                }
            }

            async apiCall(endpoint, method = 'GET', data = null) {
                const url = `${this.apiBase}?endpoint=${endpoint}`;
                const options = {
                    method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                };

                if (data) {
                    options.body = JSON.stringify(data);
                }

                const response = await fetch(url, options);
                if (!response.ok) {
                    throw new Error(`API call failed: ${response.status}`);
                }

                return await response.json();
            }

            async fetchDashboardData() {
                try {
                    const data = await this.apiCall('dashboard-data');
                    this.cache = data;
                    this.setConnectionStatus(true);
                    return data;
                } catch (error) {
                    this.setConnectionStatus(false);
                    // Return cached data if available
                    if (this.cache) {
                        return this.cache;
                    }
                    throw error;
                }
            }

            async addSale(sale) {
                try {
                    const result = await this.apiCall('sales', 'POST', sale);
                    this.playSaleSound();
                    // Refresh cache
                    await this.fetchDashboardData();
                    return result;
                } catch (error) {
                    console.error('Failed to add sale:', error);
                    throw error;
                }
            }

            playSaleSound() {
                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmAaAjaD0fPQfS4FKWrB7+OOVQEG');
                audio.volume = 0.3;
                audio.play().catch(e => console.log('Audio play failed:', e));
            }
        }

        // Initialize database
        const db = new MySQLDB();

        // Utility functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(parseFloat(amount || 0));
        }

        function calculateProgress(achieved, target) {
            if (!target || target === 0) return 0;
            return Math.min((parseFloat(achieved || 0) / parseFloat(target)) * 100, 100);
        }

        function getProgressColor(progress) {
            if (progress >= 90) return 'bg-green-500';
            if (progress >= 70) return 'bg-blue-500';
            if (progress >= 50) return 'bg-yellow-500';
            if (progress >= 30) return 'bg-orange-500';
            return 'bg-red-500';
        }

        // Sale Popup Management
        function showSalePopup(sale, agent, company) {
            const popup = document.getElementById('salePopup');
            popup.innerHTML = `
                <div>ðŸŽ‰ SALE CONFIRMED! ðŸŽ‰</div>
                <div style="margin-top: 1rem; font-size: 2.5rem;">
                    ${agent.name} - ${company.currency.symbol} ${formatCurrency(sale.amount)}
                </div>
                <div style="margin-top: 0.5rem; font-size: 2rem; color: rgba(255,255,255,0.8);">
                    ${sale.units} unit${sale.units > 1 ? 's' : ''} â€¢ ${sale.clientName}
                </div>
            `;
            popup.classList.remove('hidden');
            
            setTimeout(() => {
                popup.classList.add('hidden');
            }, 5000);
        }

        // Agent Row Component
        function AgentRow({ agent, team, index }) {
            const volumeProgress = calculateProgress(agent.volumeAchieved, agent.volumeTarget);
            const unitsProgress = calculateProgress(agent.unitsAchieved, agent.unitsTarget);
            
            return React.createElement('tr', {
                key: agent.id,
                className: 'transition-all duration-500 ease-in-out'
            }, [
                // Agent Info
                React.createElement('td', {
                    key: 'agent-info',
                    className: 'text-center'
                }, [
                    React.createElement('div', {
                        key: 'team-indicator',
                        className: 'team-indicator',
                        style: { backgroundColor: team?.color || '#64748B' }
                    }),
                    React.createElement('div', {
                        key: 'agent-details',
                        className: 'flex items-center justify-center space-x-4'
                    }, [
                        React.createElement('img', {
                            key: 'photo',
                            src: agent.photo,
                            alt: agent.name,
                            className: 'agent-photo',
                            onError: (e) => {
                                e.target.src = `https://via.placeholder.com/128x128/${team?.color?.replace('#', '') || '64748B'}/FFFFFF?text=${agent.name.charAt(0)}`;
                            }
                        }),
                        React.createElement('div', {
                            key: 'info'
                        }, [
                            React.createElement('div', {
                                key: 'name',
                                className: 'agent-name',
                                style: { color: team?.color || '#FFFFFF' }
                            }, agent.name),
                            React.createElement('div', {
                                key: 'team',
                                className: 'agent-stats',
                                style: { color: 'rgba(148, 163, 184, 0.8)' }
                            }, agent.teamName),
                            React.createElement('div', {
                                key: 'category',
                                className: 'text-xl text-slate-400'
                            }, agent.category)
                        ])
                    ])
                ]),
                
                // Volume Progress
                React.createElement('td', {
                    key: 'volume-progress',
                    className: 'text-center'
                }, [
                    React.createElement('div', {
                        key: 'progress-container',
                        className: 'space-y-3'
                    }, [
                        React.createElement('div', {
                            key: 'progress-bar-container',
                            className: 'progress-bar'
                        }, React.createElement('div', {
                            className: `progress-fill ${getProgressColor(volumeProgress)}`,
                            style: { width: `${volumeProgress}%` }
                        })),
                        React.createElement('div', {
                            key: 'progress-text',
                            className: 'progress-text'
                        }, `${volumeProgress.toFixed(1)}%`),
                        React.createElement('div', {
                            key: 'amounts',
                            className: 'agent-stats text-slate-300'
                        }, `${formatCurrency(agent.volumeAchieved)} / ${formatCurrency(agent.volumeTarget)}`)
                    ])
                ]),
                
                // Units Progress
                React.createElement('td', {
                    key: 'units-progress',
                    className: 'text-center'
                }, [
                    React.createElement('div', {
                        key: 'progress-container',
                        className: 'space-y-3'
                    }, [
                        React.createElement('div', {
                            key: 'progress-bar-container',
                            className: 'progress-bar'
                        }, React.createElement('div', {
                            className: `progress-fill ${getProgressColor(unitsProgress)}`,
                            style: { width: `${unitsProgress}%` }
                        })),
                        React.createElement('div', {
                            key: 'progress-text',
                            className: 'progress-text'
                        }, `${unitsProgress.toFixed(1)}%`),
                        React.createElement('div', {
                            key: 'units',
                            className: 'agent-stats text-slate-300'
                        }, `${agent.unitsAchieved} / ${agent.unitsTarget}`)
                    ])
                ]),
                
                // Sales Count
                React.createElement('td', {
                    key: 'sales-count',
                    className: 'text-center'
                }, [
                    React.createElement('div', {
                        key: 'sales-number',
                        className: 'progress-text text-blue-400'
                    }, agent.totalSales || 0),
                    React.createElement('div', {
                        key: 'sales-label',
                        className: 'text-xl text-slate-400'
                    }, 'Sales')
                ]),
                
                // Status
                React.createElement('td', {
                    key: 'status',
                    className: 'text-center'
                }, React.createElement('span', {
                    className: `status-badge ${
                        volumeProgress >= 70 ? 'bg-green-600' :
                        volumeProgress >= 50 ? 'bg-yellow-600' :
                        'bg-red-600'
                    }`
                }, volumeProgress >= 70 ? 'ON TRACK' : volumeProgress >= 50 ? 'BEHIND' : 'CRITICAL'))
            ]);
        }

        // Daily Targets Component
        function DailyTargets({ teams, settings, company }) {
            return React.createElement('div', {
                className: 'scoreboard-container p-8'
            }, [
                React.createElement('h3', {
                    key: 'header',
                    className: 'daily-targets-header text-center mb-6'
                }, 'DAILY TARGETS'),
                React.createElement('div', {
                    key: 'content',
                    className: 'space-y-4'
                }, teams.slice(0, 6).map(team => 
                    React.createElement('div', {
                        key: team.id,
                        className: 'p-4 bg-slate-700/30 rounded-xl border border-slate-600/30'
                    }, [
                        React.createElement('div', {
                            key: 'team-header',
                            className: 'flex justify-between items-center mb-2'
                        }, [
                            React.createElement('span', {
                                key: 'team-name',
                                className: 'daily-targets-table font-bold',
                                style: { color: team.color }
                            }, team.name),
                            React.createElement('span', {
                                key: 'progress',
                                className: 'text-lg font-bold text-white'
                            }, `${Math.round(team.volumeProgress)}%`)
                        ]),
                        React.createElement('div', {
                            key: 'targets-info',
                            className: 'grid grid-cols-2 gap-2 text-lg'
                        }, [
                            React.createElement('div', {
                                key: 'volume-target',
                                className: 'text-slate-300'
                            }, `Volume: ${company.currency.symbol} ${formatCurrency(team.dailyVolumeTarget || 0)}`),
                            React.createElement('div', {
                                key: 'units-target',
                                className: 'text-slate-300'
                            }, `Units: ${team.dailyUnitsTarget || 0}`)
                        ]),
                        React.createElement('div', {
                            key: 'members',
                            className: 'text-base text-slate-400 mt-1'
                        }, `${team.agentCount} team members`)
                    ])
                ))
            ]);
        }

        // Team Ranking Component
        function TeamRanking({ teams, agents, company }) {
            return React.createElement('div', {
                className: 'scoreboard-container p-8'
            }, [
                React.createElement('h3', {
                    key: 'header',
                    className: 'daily-targets-header text-center mb-6'
                }, 'TEAM RANKINGS'),
                React.createElement('div', {
                    key: 'content',
                    className: 'space-y-4'
                }, teams.slice(0, 6).map((team, index) => 
                    React.createElement('div', {
                        key: team.id,
                        className: `p-4 rounded-xl border ${
                            index === 0 ? 'bg-yellow-500/20 border-yellow-500/50' :
                            index === 1 ? 'bg-gray-400/20 border-gray-400/50' :
                            index === 2 ? 'bg-orange-600/20 border-orange-600/50' :
                            'bg-slate-700/30 border-slate-600/30'
                        }`
                    }, [
                        React.createElement('div', {
                            key: 'ranking-row',
                            className: 'flex items-center justify-between'
                        }, [
                            React.createElement('div', {
                                key: 'position-info',
                                className: 'flex items-center space-x-3'
                            }, [
                                React.createElement('span', {
                                    key: 'rank',
                                    className: 'text-4xl font-bold text-white'
                                }, `#${index + 1}`),
                                React.createElement('div', {
                                    key: 'team-info'
                                }, [
                                    React.createElement('div', {
                                        key: 'name',
                                        className: 'daily-targets-table font-bold',
                                        style: { color: team.color }
                                    }, team.name),
                                    React.createElement('div', {
                                        key: 'achieved',
                                        className: 'text-lg text-slate-400'
                                    }, `${company.currency.symbol} ${formatCurrency(team.volumeAchieved)} achieved`)
                                ])
                            ]),
                            React.createElement('div', {
                                key: 'performance',
                                className: 'text-right'
                            }, [
                                React.createElement('div', {
                                    key: 'percentage',
                                    className: 'text-3xl font-bold text-white'
                                }, `${Math.round(team.volumeProgress)}%`),
                                React.createElement('div', {
                                    key: 'units-achieved',
                                    className: 'text-lg text-slate-400'
                                }, `${team.unitsAchieved} units`)
                            ])
                        ])
                    ])
                ))
            ]);
        }

        // News Ticker Component
        function NewsTicker({ messages }) {
            return React.createElement('div', {
                className: 'news-ticker'
            }, React.createElement('div', {
                className: 'ticker-content'
            }, messages.join(' â€¢ ')));
        }

        // Main Dashboard Component
        function Dashboard() {
            const [data, setData] = useState({
                company: { name: 'SALES LEADERBOARD', currency: { symbol: 'LKR' } },
                teams: [],
                agents: [],
                sales: [],
                settings: { autoScrollInterval: 6000, agentsPerPage: 2 },
                newsTicker: ['Welcome to Sales Dashboard']
            });
            const [currentTime, setCurrentTime] = useState(new Date());
            const [scrollOffset, setScrollOffset] = useState(0);

            useEffect(() => {
                // Load initial data
                const loadData = async () => {
                    try {
                        const dashboardData = await db.fetchDashboardData();
                        setData(dashboardData);
                    } catch (error) {
                        console.error('Failed to load dashboard data:', error);
                    }
                };

                loadData();

                // Set up intervals
                const timeInterval = setInterval(() => {
                    setCurrentTime(new Date());
                }, 1000);

                const dataInterval = setInterval(loadData, 30000); // Refresh every 30 seconds

                const scrollInterval = setInterval(() => {
                    if (data.agents.filter(a => a.isActive).length > data.settings.agentsPerPage) {
                        setScrollOffset(prev => (prev + 1) % data.agents.filter(a => a.isActive).length);
                    }
                }, data.settings.autoScrollInterval);

                // Listen for real-time updates
                const handleSaleUpdate = (event) => {
                    if (event.detail && event.detail.type === 'sale_added') {
                        loadData(); // Refresh data when sale is added
                        const sale = event.detail.sale;
                        const agent = data.agents.find(a => a.id === sale.agentId);
                        if (agent) {
                            showSalePopup(sale, agent, data.company);
                        }
                    }
                };

                window.addEventListener('saleUpdate', handleSaleUpdate);

                return () => {
                    clearInterval(timeInterval);
                    clearInterval(dataInterval);
                    clearInterval(scrollInterval);
                    window.removeEventListener('saleUpdate', handleSaleUpdate);
                };
            }, [data.settings.autoScrollInterval, data.agents.length, data.settings.agentsPerPage]);

            const activeAgents = data.agents.filter(a => a.isActive);
            const agentsPerPage = data.settings.agentsPerPage;
            const displayedAgents = activeAgents.slice(scrollOffset, scrollOffset + agentsPerPage);
            if (displayedAgents.length < agentsPerPage && activeAgents.length > 1) {
                displayedAgents.push(...activeAgents.slice(0, agentsPerPage - displayedAgents.length));
            }

            return React.createElement('div', {
                className: 'min-h-screen p-8 pb-24'
            }, [
                // Header
                React.createElement('div', {
                    key: 'header',
                    className: 'text-center mb-12'
                }, [
                    React.createElement('h1', {
                        key: 'title',
                        className: 'main-title text-white mb-4'
                    }, data.company.name.toUpperCase()),
                    React.createElement('div', {
                        key: 'datetime',
                        className: 'date-time text-slate-300'
                    }, `${currentTime.toLocaleDateString()} â€¢ ${currentTime.toLocaleTimeString()}`)
                ]),

                React.createElement('div', {
                    key: 'main-content',
                    className: 'grid grid-cols-12 gap-8 h-[calc(100vh-300px)]'
                }, [
                    // Main Scoreboard
                    React.createElement('div', {
                        key: 'main-scoreboard',
                        className: 'col-span-8'
                    }, [
                        React.createElement('div', {
                            key: 'scoreboard-container',
                            className: 'bg-slate-800/50 backdrop-blur-sm rounded-3xl border border-slate-700/50 p-8 h-full'
                        }, [
                            React.createElement('div', {
                                key: 'table-container',
                                className: 'overflow-hidden h-full'
                            }, React.createElement('table', {
                                className: 'w-full scoreboard-table'
                            }, [
                                React.createElement('thead', {
                                    key: 'thead'
                                }, React.createElement('tr', {
                                    className: 'border-b-2 border-slate-600'
                                }, [
                                    React.createElement('th', { className: 'text-slate-300 p-6 text-center' }, 'Agent'),
                                    React.createElement('th', { className: 'text-slate-300 p-6 text-center' }, 'Volume Progress'),
                                    React.createElement('th', { className: 'text-slate-300 p-6 text-center' }, 'Units Progress'),
                                    React.createElement('th', { className: 'text-slate-300 p-6 text-center' }, 'Sales'),
                                    React.createElement('th', { className: 'text-slate-300 p-6 text-center' }, 'Status')
                                ])),
                                React.createElement('tbody', {
                                    key: 'tbody'
                                }, displayedAgents.map((agent, index) => {
                                    const team = data.teams.find(t => t.id === agent.teamId);
                                    return React.createElement(AgentRow, {
                                        key: `${agent.id}-${index}`,
                                        agent,
                                        team,
                                        index
                                    });
                                }))
                            ])),
                            
                            // Auto-scroll indicator
                            activeAgents.length > agentsPerPage && React.createElement('div', {
                                key: 'scroll-indicators',
                                className: 'flex justify-center mt-6'
                            }, React.createElement('div', {
                                className: 'flex space-x-4'
                            }, Array.from({ length: activeAgents.length }).map((_, index) => 
                                React.createElement('div', {
                                    key: index,
                                    className: `scroll-indicator ${index === scrollOffset ? 'active' : ''}`
                                })
                            )))
                        ])
                    ]),

                    // Right Panel
                    React.createElement('div', {
                        key: 'right-panel',
                        className: 'col-span-4 space-y-8'
                    }, [
                        React.createElement(DailyTargets, {
                            key: 'daily-targets',
                            teams: data.teams,
                            settings: data.settings,
                            company: data.company
                        }),
                        React.createElement(TeamRanking, {
                            key: 'team-ranking',
                            teams: data.teams,
                            agents: activeAgents,
                            company: data.company
                        })
                    ])
                ]),

                // News Ticker
                React.createElement(NewsTicker, {
                    key: 'news-ticker',
                    messages: data.newsTicker
                })
            ]);
        }

        // Initialize the dashboard
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(Dashboard));

        console.log('MySQL-powered Sales Dashboard initialized');
    </script>
</body>
</html>